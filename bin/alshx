#!/bin/sh

if [ -z "$1" ] ; then
    echo "Please include script"
    exit 1
fi

Q="q=$(openssl rand -base64 12)"

if [ $1 = "--upgrade" ] ; then
    BASEDIR=$(dirname "$0")
    wget https://raw.githubusercontent.com/alshdavid/sh/master/bin/alshx?$Q -O $BASEDIR/alshx
    chmod x+ $BASEDIR/alshx
    exit 0
fi

SCRIPT=$1
ARGS=""
i=0
for ARG in "$@"
do
    if [ "$i" != 0 ]
    then
        ARGS="$ARGS $ARG"
    fi
    i=$(( $i + 1 ))
done


curl -s https://raw.githubusercontent.com/alshdavid/sh/master/scripts/$SCRIPT.sh?$Q | sh /dev/stdin $ARGS
